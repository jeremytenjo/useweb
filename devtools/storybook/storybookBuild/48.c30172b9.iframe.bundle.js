/*! For license information please see 48.c30172b9.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"./packages/media/images/Image/node_modules/image-compressor.js/dist/image-compressor.esm.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var canvasToBlob=function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}((function(module){!function(window){var CanvasPrototype=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,hasBlobConstructor=window.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),hasArrayBufferViewSupport=hasBlobConstructor&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,dataURIPattern=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,dataURLtoBlob=(hasBlobConstructor||BlobBuilder)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(dataURI){var matches,mediaType,isBase64,dataString,byteString,arrayBuffer,intArray,i,bb;if(!(matches=dataURI.match(dataURIPattern)))throw new Error("invalid data URI");for(mediaType=matches[2]?matches[1]:"text/plain"+(matches[3]||";charset=US-ASCII"),isBase64=!!matches[4],dataString=dataURI.slice(matches[0].length),byteString=isBase64?atob(dataString):decodeURIComponent(dataString),arrayBuffer=new ArrayBuffer(byteString.length),intArray=new Uint8Array(arrayBuffer),i=0;i<byteString.length;i+=1)intArray[i]=byteString.charCodeAt(i);return hasBlobConstructor?new Blob([hasArrayBufferViewSupport?intArray:arrayBuffer],{type:mediaType}):((bb=new BlobBuilder).append(arrayBuffer),bb.getBlob(mediaType))};window.HTMLCanvasElement&&!CanvasPrototype.toBlob&&(CanvasPrototype.mozGetAsFile?CanvasPrototype.toBlob=function(callback,type,quality){var self=this;setTimeout((function(){quality&&CanvasPrototype.toDataURL&&dataURLtoBlob?callback(dataURLtoBlob(self.toDataURL(type,quality))):callback(self.mozGetAsFile("blob",type))}))}:CanvasPrototype.toDataURL&&dataURLtoBlob&&(CanvasPrototype.toBlob=function(callback,type,quality){var self=this;setTimeout((function(){callback(dataURLtoBlob(self.toDataURL(type,quality)))}))})),module.exports?module.exports=dataURLtoBlob:window.dataURLtoBlob=dataURLtoBlob}(window)})),toString=Object.prototype.toString,DEFAULTS={checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},REGEXP_IMAGE_TYPE=/^image\/.+$/;function isImageType(value){return REGEXP_IMAGE_TYPE.test(value)}var fromCharCode=String.fromCharCode;var btoa=window.btoa;function arrayBufferToDataURL(arrayBuffer,mimeType){var uint8=new Uint8Array(arrayBuffer),data="";if("function"==typeof uint8.forEach)uint8.forEach((function(value){data+=fromCharCode(value)}));else for(var length=uint8.length,i=0;i<length;i+=1)data+=fromCharCode(uint8[i]);return"data:"+mimeType+";base64,"+btoa(data)}function getOrientation(arrayBuffer){var dataView=new DataView(arrayBuffer),orientation=void 0,littleEndian=void 0,app1Start=void 0,ifdStart=void 0;if(255===dataView.getUint8(0)&&216===dataView.getUint8(1))for(var length=dataView.byteLength,offset=2;offset<length;){if(255===dataView.getUint8(offset)&&225===dataView.getUint8(offset+1)){app1Start=offset;break}offset+=1}if(app1Start){var tiffOffset=app1Start+10;if("Exif"===function getStringFromCharCode(dataView,start,length){var str="",i=void 0;for(length+=start,i=start;i<length;i+=1)str+=fromCharCode(dataView.getUint8(i));return str}(dataView,app1Start+4,4)){var endianness=dataView.getUint16(tiffOffset);if(((littleEndian=18761===endianness)||19789===endianness)&&42===dataView.getUint16(tiffOffset+2,littleEndian)){var firstIFDOffset=dataView.getUint32(tiffOffset+4,littleEndian);firstIFDOffset>=8&&(ifdStart=tiffOffset+firstIFDOffset)}}}if(ifdStart){var _length=dataView.getUint16(ifdStart,littleEndian),_offset=void 0,i=void 0;for(i=0;i<_length;i+=1)if(_offset=ifdStart+12*i+2,274===dataView.getUint16(_offset,littleEndian)){_offset+=8,orientation=dataView.getUint16(_offset,littleEndian),dataView.setUint16(_offset,1,littleEndian);break}}return orientation}var REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/i;function normalizeDecimalNumber(value){var times=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return REGEXP_DECIMALS.test(value)?Math.round(value*times)/times:value}var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_window$1=window,ArrayBuffer$1=_window$1.ArrayBuffer,FileReader=_window$1.FileReader,URL=window.URL||window.webkitURL,REGEXP_EXTENSION=/\.\w+$/,ImageCompressor=function(){function ImageCompressor(file,options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ImageCompressor),this.result=null,file&&this.compress(file,options)}return createClass(ImageCompressor,[{key:"compress",value:function compress(file,options){var _this=this,image=new Image;return options=_extends({},DEFAULTS,options),ArrayBuffer$1||(options.checkOrientation=!1),new Promise((function(resolve,reject){if((x=file)instanceof Blob||"[object Blob]"===toString.call(x)){var x,mimeType=file.type;if(isImageType(mimeType))if(URL||FileReader){if(URL&&!options.checkOrientation)resolve({url:URL.createObjectURL(file)});else if(FileReader){var reader=new FileReader,checkOrientation=options.checkOrientation&&"image/jpeg"===mimeType;reader.onload=function(_ref){var result=_ref.target.result;resolve(checkOrientation?_extends({url:arrayBufferToDataURL(result,mimeType)},function parseOrientation(orientation){var rotate=0,scaleX=1,scaleY=1;switch(orientation){case 2:scaleX=-1;break;case 3:rotate=-180;break;case 4:scaleY=-1;break;case 5:rotate=90,scaleY=-1;break;case 6:rotate=90;break;case 7:rotate=90,scaleX=-1;break;case 8:rotate=-90}return{rotate:rotate,scaleX:scaleX,scaleY:scaleY}}(getOrientation(result))):{url:result})},reader.onabort=function(){reject(new Error("Aborted to load the image with FileReader."))},reader.onerror=function(){reject(new Error("Failed to load the image with FileReader."))},checkOrientation?reader.readAsArrayBuffer(file):reader.readAsDataURL(file)}}else reject(new Error("The current browser does not support image compression."));else reject(new Error("The first argument must be an image File or Blob object."))}else reject(new Error("The first argument must be a File or Blob object."))})).then((function(data){return new Promise((function(resolve,reject){image.onload=function(){return resolve(_extends({},data,{naturalWidth:image.naturalWidth,naturalHeight:image.naturalHeight}))},image.onabort=function(){reject(new Error("Aborted to load the image."))},image.onerror=function(){reject(new Error("Failed to load the image."))},image.alt=file.name,image.src=data.url}))})).then((function(_ref2){var naturalWidth=_ref2.naturalWidth,naturalHeight=_ref2.naturalHeight,_ref2$rotate=_ref2.rotate,rotate=void 0===_ref2$rotate?0:_ref2$rotate,_ref2$scaleX=_ref2.scaleX,scaleX=void 0===_ref2$scaleX?1:_ref2$scaleX,_ref2$scaleY=_ref2.scaleY,scaleY=void 0===_ref2$scaleY?1:_ref2$scaleY;return new Promise((function(resolve){var canvas=document.createElement("canvas"),context=canvas.getContext("2d"),aspectRatio=naturalWidth/naturalHeight,maxWidth=Math.max(options.maxWidth,0)||1/0,maxHeight=Math.max(options.maxHeight,0)||1/0,minWidth=Math.max(options.minWidth,0)||0,minHeight=Math.max(options.minHeight,0)||0,width=naturalWidth,height=naturalHeight;if(maxWidth<1/0&&maxHeight<1/0?maxHeight*aspectRatio>maxWidth?maxHeight=maxWidth/aspectRatio:maxWidth=maxHeight*aspectRatio:maxWidth<1/0?maxHeight=maxWidth/aspectRatio:maxHeight<1/0&&(maxWidth=maxHeight*aspectRatio),minWidth>0&&minHeight>0?minHeight*aspectRatio>minWidth?minHeight=minWidth/aspectRatio:minWidth=minHeight*aspectRatio:minWidth>0?minHeight=minWidth/aspectRatio:minHeight>0&&(minWidth=minHeight*aspectRatio),options.width>0)height=(width=options.width)/aspectRatio;else if(options.height>0){width=(height=options.height)*aspectRatio}var destX=-(width=Math.min(Math.max(width,minWidth),maxWidth))/2,destY=-(height=Math.min(Math.max(height,minHeight),maxHeight))/2,destWidth=width,destHeight=height;if(Math.abs(rotate)%180==90){var _width$height={width:height,height:width};width=_width$height.width,height=_width$height.height}canvas.width=normalizeDecimalNumber(width),canvas.height=normalizeDecimalNumber(height),isImageType(options.mimeType)||(options.mimeType=file.type);var defaultFillStyle="transparent";file.size>options.convertSize&&"image/png"===options.mimeType&&(defaultFillStyle="#fff",options.mimeType="image/jpeg"),context.fillStyle=defaultFillStyle,context.fillRect(0,0,width,height),context.save(),context.translate(width/2,height/2),context.rotate(rotate*Math.PI/180),context.scale(scaleX,scaleY),options.beforeDraw&&options.beforeDraw.call(_this,context,canvas),context.drawImage(image,Math.floor(normalizeDecimalNumber(destX)),Math.floor(normalizeDecimalNumber(destY)),Math.floor(normalizeDecimalNumber(destWidth)),Math.floor(normalizeDecimalNumber(destHeight))),options.drew&&options.drew.call(_this,context,canvas),context.restore();var done=function done(result){resolve({naturalWidth:naturalWidth,naturalHeight:naturalHeight,result:result})};canvas.toBlob?canvas.toBlob(done,options.mimeType,options.quality):done(canvasToBlob(canvas.toDataURL(options.mimeType,options.quality)))}))})).then((function(_ref3){var naturalWidth=_ref3.naturalWidth,naturalHeight=_ref3.naturalHeight,result=_ref3.result;if(URL&&!options.checkOrientation&&URL.revokeObjectURL(image.src),result)if(result.size>file.size&&options.mimeType===file.type&&!(options.width>naturalWidth||options.height>naturalHeight||options.minWidth>naturalWidth||options.minHeight>naturalHeight))result=file;else{var date=new Date;result.lastModified=date.getTime(),result.lastModifiedDate=date,result.name=file.name,result.name&&result.type!==file.type&&(result.name=result.name.replace(REGEXP_EXTENSION,function imageTypeToExtension(value){var includeDot=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],extension=isImageType(value)?value.substr(6):"";return"jpeg"===extension&&(extension="jpg"),extension&&includeDot&&(extension="."+extension),extension}(result.type)))}else result=file;return _this.result=result,options.success&&options.success.call(_this,result),Promise.resolve(result)})).catch((function(err){if(!options.error)throw err;options.error.call(_this,err)}))}}]),ImageCompressor}();__webpack_exports__.a=ImageCompressor},"./packages/media/images/Image/utils/compress/index.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return CompressImage}));__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js");var image_compressor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/media/images/Image/node_modules/image-compressor.js/dist/image-compressor.esm.js");function CompressImage(file){var quality=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return new Promise((function(resolve,reject){new image_compressor_js__WEBPACK_IMPORTED_MODULE_2__.a(file,{quality:quality,success:function success(result){resolve(result)},error:function error(e){reject("Compression Failed: "+e.message)}})}))}}}]);
//# sourceMappingURL=48.c30172b9.iframe.bundle.js.map